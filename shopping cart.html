<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8">
<title>Shopping Cart - Heaven Furniture</title>
<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body {
    background: url("banner 2/bg.png") no-repeat fixed center;
    background-size: cover;
    margin: 0;
    font-family: 'Prompt', sans-serif;
    color: #333;
}

.wrapper {
    max-width: 1600px;
    margin: 0 auto;
    text-align: center;
}

.top-banner {
    border-radius: 28px;
    display: block;
    margin: 20px auto;
}

.nav-menu { margin: 0 auto; }
.nav-menu img {
    border-radius: 18px;
}

.cart-section {
    width: 1534px; 
    margin: 40px auto;
    background: rgba(255, 255, 255, 0.95);
    padding: 40px;
    border-radius: 35px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.1);
    box-sizing: border-box;
    min-height: 500px;
}

.cart-header {
    text-align: left;
    border-bottom: 2px solid #f0f0f0;
    padding-bottom: 15px;
    margin-bottom: 30px;
}

.cart-header h2 { margin: 0; color: #333; }
.cart-header p { margin: 5px 0 0; color: #888; font-size: 14px; }

.cart-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 30px;
}

.cart-card {
    background: #fff;
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    position: relative;
    border: 1px solid #eee;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.remove-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    background: #ff4757;
    color: white;
    border: none;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    cursor: pointer;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 5;
}

.cart-card img {
    width: 100%;
    height: 180px;
    object-fit: contain;
    margin-bottom: 15px;
    mix-blend-mode: multiply; 
}

.cart-title {
    font-size: 18px;
    font-weight: 600;
    color: #333;
    margin-bottom: 5px;
    text-align: center;
    line-height: 1.4;
    height: 50px; 
    overflow: hidden;
}

.cart-price {
    color: #b5835a;
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 10px;
}

.btn-fav-small {
    background: #f8f8f8;
    color: #ff4757;
    border: 1px solid #eee;
    padding: 5px 15px;
    border-radius: 10px;
    font-size: 12px;
    cursor: pointer;
    font-weight: bold;
}

.summary-section {
    margin-top: 50px;
    padding-top: 30px;
    border-top: 2px solid #f0f0f0;
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 30px;
}

.summary-text {
    text-align: right;
}

.total-label { font-size: 16px; color: #888; }
.total-price { font-size: 32px; font-weight: bold; color: #b5835a; }

.pay-btn {
    padding: 15px 50px;
    border: none;
    border-radius: 50px;
    background: #b5835a;
    color: white;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    font-family: 'Prompt', sans-serif;
}

.empty-cart-box {
    grid-column: 1 / -1;
    text-align: center;
    padding: 80px 0;
}
.btn-shop {
    display: inline-block;
    margin-top: 20px;
    padding: 12px 30px;
    background: #333;
    color: white;
    text-decoration: none;
    border-radius: 30px;
    font-weight: bold;
}
</style>

<script type="text/javascript">
function MM_swapImgRestore(){var i,x,a=document.MM_sr;for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++)x.src=x.oSrc;}
function MM_preloadImages(){var d=document;if(d.images){ if(!d.MM_p)d.MM_p=new Array();
 var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0;i<a.length;i++)
 if(a[i].indexOf("#")!=0){d.MM_p[j]=new Image;d.MM_p[j++].src=a[i];}}}
function MM_findObj(n,d){var p,i,x;if(!d)d=document;if((p=n.indexOf("?"))>0&&parent.frames.length){
 d=parent.frames[n.substring(p+1)].document;n=n.substring(0,p);}
 if(!(x=d[n])&&d.all)x=d.all[n];for(i=0;!x&&i<d.forms.length;i++)x=d.forms[i][n];
 for(i=0;!x&&d.layers&&i<d.layers.length;i++)x=MM_findObj(n,d.layers[i].document);
 if(!x&&d.getElementById)x=d.getElementById(n);return x;}
function MM_swapImage(){var i,j=0,x,a=MM_swapImage.arguments;document.MM_sr=new Array;
 for(i=0;i<(a.length-2);i+=3)
  if((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x;if(!x.oSrc)x.oSrc=x.src;x.src=a[i+2];}
}

function loadCart(){
  let cart = JSON.parse(localStorage.getItem("cart") || "[]");
  const box = document.getElementById("cartList");
  const summarySection = document.getElementById("summarySection");
  const totalPriceEl = document.getElementById("totalPrice");
  
  box.innerHTML = "";
  
  if(cart.length === 0){
    box.innerHTML = `
      <div class="empty-cart-box">
        <div style="font-size: 60px; margin-bottom:10px;">üõí</div>
        <h3 style="color:#555;">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤</h3>
        <p style="color:#888;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ß‡πâ ‡∏•‡∏≠‡∏á‡πÑ‡∏õ‡∏î‡∏π‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏¥‡∏Ñ‡∏£‡∏±‡∏ö</p>
        <a href="Product.html" class="btn-shop">‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
      </div>`;
    summarySection.style.display = "none";
    return;
  }

  summarySection.style.display = "flex";
  let total = 0;

  cart.forEach((item, index) => {
    let priceStr = item.price.toString().replace(/,/g, '');
    let priceNum = parseFloat(priceStr) || 0;
    
    total += priceNum * (item.qty || 1);
    
    box.innerHTML += `
      <div class="cart-card">
        <button class="remove-btn" onclick="removeItem(${index})" title="‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤">√ó</button>
        <img src="${item.img}">
        <div class="cart-title">${item.name}</div>
        <div class="cart-price">‡∏ø${priceNum.toLocaleString()}</div>
        <button class="btn-fav-small" onclick="justAlertFav('${item.name}')">‚ù§ ‡∏ñ‡∏π‡∏Å‡πÉ‡∏à</button>
      </div>
    `;
  });
  
  totalPriceEl.innerText = "‡∏ø" + total.toLocaleString();
}

function justAlertFav(name) {
    let list = JSON.parse(localStorage.getItem("favorites") || "[]");
    if(!list.some(p => p.name === name)) {
       
        let cart = JSON.parse(localStorage.getItem("cart") || "[]");
        let item = cart.find(p => p.name === name);
        list.push({ name: item.name, price: item.price, img: item.img });
        localStorage.setItem("favorites", JSON.stringify(list));
        alert("‚ù§Ô∏è ‡πÄ‡∏û‡∏¥‡πà‡∏° '" + name + "' ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß");
    } else {
        alert("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÉ‡∏à‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß");
    }
}

function removeItem(index){
  if(confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤?")){
    let cart = JSON.parse(localStorage.getItem("cart") || "[]");
    cart.splice(index, 1);
    localStorage.setItem("cart", JSON.stringify(cart));
    loadCart();
  }
}

function goToPayment(){
    localStorage.removeItem("checkoutItem");
    window.location.href = 'payment.html';
}

function initPage(){
  MM_preloadImages('banner 2/home1.1.png','banner 2/home5.1.png','banner 2/home2.1.png','banner 2/home3.1.png','banner 2/home4.1.png','banner 2/home6/1.png','banner 2/home7/1.png','banner 2/home8/1.png','banner 2/home10/1.png');
  loadCart();
}
</script>
</head>

<body onLoad="initPage()">
<div class="wrapper">
  
  <header>
    <img class="top-banner" src="bannerrrrrrrrrrrrrrrrrrrrrrrrr33/shopping cart.png" width="1605" height="200" alt="Shopping Cart Header">
  </header>

  <table width="1534" border="0" class="nav-menu">
    <tr>
      <td width="155"><a href="index.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image2','','banner 2/home1.1.png',1)"><img src="banner 2/home1.png" width="155" height="40" id="Image2"></a></td>
      <td width="155"><a href="Search.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image4','','banner 2/home5.1.png',1)"><img src="banner 2/home5.png" width="155" height="40" id="Image4"></a></td>
      <td width="155"><a href="Product.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image3','','banner 2/home2.1.png',1)"><img src="banner 2/home2.png" width="155" height="40" id="Image3"></a></td>
      <td width="155"><a href="Recommended products.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image5','','banner 2/home3.1.png',1)"><img src="banner 2/home3.png" width="155" height="40" id="Image5"></a></td>
      <td width="155"><a href="promotion.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image6','','banner 2/home4.1.png',1)"><img src="banner 2/home4.png" width="155" height="40" id="Image6"></a></td>
      <td width="155"><a href="Contact.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image7','','banner 2/home6/1.png',1)"><img src="banner 2/home6/2.png" width="155" height="40" id="Image7"></a></td>
      <td width="155"><a href="profile.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image8','','banner 2/home7/1.png',1)"><img src="banner 2/home7/2.png" width="155" height="40" id="Image8"></a></td>
      <td width="155"><a href="Favorites.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image9','','banner 2/home8/1.png',1)"><img src="banner 2/home8/2.png" width="155" height="40" id="Image9"></a></td>
      <td width="155"><img src="banner 2/home9/1.png" width="155" height="40"></td>
      <td width="75"><a href="payment.html" onMouseOver="MM_swapImage('Image11','','banner 2/home10/1.png',1)" onMouseOut="MM_swapImgRestore()"><img src="banner 2/home10/2.png" width="155" height="40" id="Image11"></a></td>
    </tr>
  </table>

  <div class="cart-section">
    <div class="cart-header">
        <h2>üõí ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</h2>
        <p>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</p>
    </div>

    <div id="cartList" class="cart-grid"></div>

    <div id="summarySection" class="summary-section" style="display:none;">
        <div class="summary-text">
            <div class="total-label">‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</div>
            <div id="totalPrice" class="total-price">‡∏ø0</div>
        </div>
        <button id="payBtn" class="pay-btn" onclick="goToPayment()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
    </div>
  </div>

</div>
</body>
</html>
