<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Payment - Heaven Furniture</title>
<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
body {
    background: url("banner 2/bg.png") no-repeat fixed center;
    background-size: cover;
    margin: 0;
    font-family: 'Prompt', 'Tahoma', sans-serif;
    color: #333;
}

.wrapper {
    max-width: 1600px;
    margin: 0 auto;
    text-align: center;
}

.top-banner {
    border-radius: 28px;
    display: block;
    margin: 20px auto;
}

.nav-menu { margin: 0 auto; }
.nav-menu img {
    border-radius: 18px;
}

.payment-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 30px;
    max-width: 1200px;
    margin: 40px auto;
    padding-bottom: 50px;
}

.order-summary {
    background: white;
    padding: 30px;
    border-radius: 20px;
    width: 400px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    text-align: center;
    position: sticky;
    top: 20px;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
}

.order-title {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 15px;
    color: #444;
    border-bottom: 2px solid #f0f0f0;
    padding-bottom: 10px;
    flex-shrink: 0;
}

.order-items-scroll {
    overflow-y: auto;
    flex-grow: 1;
    padding-right: 5px;
    margin-bottom: 15px;
}

.item-row {
    display: flex;
    align-items: center;
    gap: 15px;
    background: #f9f9f9;
    padding: 10px;
    border-radius: 12px;
    margin-bottom: 10px;
    text-align: left;
}

.item-row img {
    width: 60px;
    height: 60px;
    object-fit: cover;
    border-radius: 8px;
}

.item-info { flex: 1; }
.item-name { font-size: 14px; font-weight: bold; color: #333; margin-bottom: 4px; }
.item-meta { font-size: 12px; color: #777; }
.item-price { font-size: 14px; font-weight: bold; color: #b5835a; }

.summary-footer {
    border-top: 2px solid #f0f0f0;
    padding-top: 15px;
    flex-shrink: 0;
}

.price-tag {
    font-size: 26px;
    color: #b5835a;
    font-weight: bold;
    margin-bottom: 15px;
}

.btn-cancel {
    background: #fff;
    border: 2px solid #ff4757;
    color: #ff4757;
    padding: 10px 20px;
    border-radius: 50px;
    cursor: pointer;
    font-weight: bold;
    width: 100%;
}
.btn-cancel:hover { background: #ff4757; color: white; }

.payment-details {
    background: white;
    padding: 40px;
    border-radius: 20px;
    flex: 1;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    text-align: left;
}

.section-header {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 15px;
    color: #333;
    display: flex;
    align-items: center;
    gap: 10px;
}

.bank-card {
    background: #006b2b;
    color: white;
    padding: 25px;
    border-radius: 15px;
    margin-bottom: 30px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    text-align: left;
}

.form-group { margin-bottom: 20px; }
.form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #555; }
.form-control {
    width: 95%; padding: 12px 15px;
    border: 1px solid #ddd; border-radius: 10px;
    font-size: 16px; font-family: 'Prompt', sans-serif;
    outline: none;
}
.form-control:focus {
    border-color: #b5835a;
}
textarea.form-control { resize: vertical; min-height: 80px; }

.btn-confirm {
    background: #b5835a; color: white; border: none;
    padding: 15px; width: 100%; border-radius: 12px;
    font-size: 18px; font-weight: bold; cursor: pointer;
    margin-top: 10px;
}
.btn-confirm:hover { background: #a0724e; }
</style>

<script type="text/javascript">
function MM_swapImgRestore() { var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc; }
function MM_preloadImages() { var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array(); var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0;i<a.length;i++) if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}} }
function MM_findObj(n,d) { var p,i,x; if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) { d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p); } if(!(x=d[n])&&d.all) x=d.all[n]; for(i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n]; for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document); if(!x&&d.getElementById) x=d.getElementById(n); return x; }
function MM_swapImage() { var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3) if ((x=MM_findObj(a[i]))!=null){ document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2]; } }
</script>
</head>

<body onLoad="MM_preloadImages('banner 2/home1.1.png','banner 2/home5.1.png','banner 2/home2.1.png','banner 2/home3.1.png','banner 2/home4.1.png','banner 2/home6/1.png','banner 2/home7/1.png','banner 2/home8/1.png','banner 2/home9/1.png')">

<div class="wrapper">
  <header>
    <img class="top-banner" src="bannerrrrrrrrrrrrrrrrrrrrrrrrr33/payment.png" width="1605" height="200" alt="Heaven Furniture">
  </header>

  <table width="1534" border="0" class="nav-menu">
    <tr>
      <td width="155"><a href="index.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Home','','banner 2/home1.1.png',1)"><img src="banner 2/home1.png" width="155" height="40" id="Home"></a></td>
      <td width="155"><a href="Search.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Search','','banner 2/home5.1.png',1)"><img src="banner 2/home5.png" width="155" height="40" id="Search"></a></td>
      <td width="155"><a href="Product.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Product','','banner 2/home2.1.png',1)"><img src="banner 2/home2.png" width="155" height="40" id="Product"></a></td>
      <td width="155"><a href="Recommended products.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Rec','','banner 2/home3.1.png',1)"><img src="banner 2/home3.png" width="155" height="40" id="Rec"></a></td>
      <td width="155"><a href="promotion.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Promo','','banner 2/home4.1.png',1)"><img src="banner 2/home4.png" width="155" height="40" id="Promo"></a></td>
      <td width="155"><a href="Contact.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Contact','','banner 2/home6/1.png',1)"><img src="banner 2/home6/2.png" width="155" height="40" id="Contact"></a></td>
      <td width="155"><a href="profile.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Profile','','banner 2/home7/1.png',1)"><img src="banner 2/home7/2.png" width="155" height="40" id="Profile"></a></td>
      <td width="155"><a href="Favorites.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Fav','','banner 2/home8/1.png',1)"><img src="banner 2/home8/2.png" width="155" height="40" id="Fav"></a></td>
      <td width="155"><a href="shopping cart.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Cart','','banner 2/home9/1.png',1)"><img src="banner 2/home9/2.png" width="155" height="40" id="Cart"></a></td>
      <td width="155"><img src="banner 2/home10/1.png" width="155" height="40"></td>
    </tr>
  </table>

  <div class="payment-container" id="mainContainer">
    <div class="order-summary">
      <div class="order-title">‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</div>
      <div id="orderItemsList" class="order-items-scroll"></div>
      <div class="summary-footer">
        <div style="font-size:14px; color:#888; margin-bottom:5px;">‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
        <div class="price-tag"><span id="displayPrice">0</span> THB</div>
        <button class="btn-cancel" onclick="cancelOrder()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ</button>
      </div>
    </div>

    <div class="payment-details">
      <div class="section-header"><i class="fas fa-university"></i> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</div>
      <div class="bank-card">
        <div style="font-size: 18px; margin-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 5px;">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢ (KBANK)</div>
        <div style="font-size: 16px;">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: HEAVEN FURNITURE</div>
        <div style="font-size: 26px; font-weight: bold; margin-top: 5px;">111-1-11111-1</div>
      </div>

      <div class="section-header"><i class="fas fa-file-invoice"></i> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</div>
      <form id="payForm">
        <div class="form-group">
          <label>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
          <input type="text" id="custName" class="form-control" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•..." required>
        </div>
        <div class="form-group">
          <label>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á:</label>
          <textarea id="custAddress" class="form-control" placeholder="‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà, ‡∏ñ‡∏ô‡∏ô, ‡πÅ‡∏Ç‡∏ß‡∏á/‡∏ï‡∏≥‡∏ö‡∏•, ‡πÄ‡∏Ç‡∏ï/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠, ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î, ‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå..." required></textarea>
        </div>
        <div class="form-group">
            <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç):</label>
            <input type="tel" id="custPhone" class="form-control" placeholder="08x-xxx-xxxx" required>
        </div>
        <div class="form-group">
          <label>‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô:</label>
          <input type="file" id="slipFile" accept="image/*" style="padding: 10px; background:#f0f0f0; width:95%; border-radius:10px;" required>
        </div>
        <input type="submit" class="btn-confirm" id="btnSubmit" value="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô">
      </form>
    </div>
  </div>
</div>

<script>
function loadOrderData(){
    var container = document.getElementById("orderItemsList");
    container.innerHTML = ""; 
    var totalPrice = 0;
    
    var checkoutItem = JSON.parse(localStorage.getItem("checkoutItem"));
    
    if(checkoutItem) {
        let priceNum = parseInt(checkoutItem.price.toString().replace(/[^0-9]/g, ''));
        totalPrice = priceNum;
        let html = `
        <div class="item-row">
            <img src="${checkoutItem.img}">
            <div class="item-info">
                <div class="item-name">${checkoutItem.name}</div>
                <div class="item-meta">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: 1 ‡∏ä‡∏¥‡πâ‡∏ô</div>
            </div>
            <div class="item-price">${priceNum.toLocaleString()} ‡∏ø</div>
        </div>`;
        container.innerHTML = html;
    } else {
        var cart = JSON.parse(localStorage.getItem("cart") || "[]");
        if(cart.length > 0) {
            cart.forEach((item) => {
                let priceNum = parseInt(item.price.toString().replace(/[^0-9]/g, ''));
                let qty = item.qty || 1;
                let itemTotal = priceNum * qty;
                totalPrice += itemTotal;
                let html = `
                <div class="item-row">
                    <img src="${item.img}">
                    <div class="item-info">
                        <div class="item-name">${item.name}</div>
                        <div class="item-meta">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${qty} ‡∏ä‡∏¥‡πâ‡∏ô</div>
                    </div>
                    <div class="item-price">${itemTotal.toLocaleString()} ‡∏ø</div>
                </div>`;
                container.innerHTML += html;
            });
        } else {
             document.getElementById("mainContainer").innerHTML = `
                <div style="background:white; padding:50px; border-radius:20px; box-shadow:0 10px 30px rgba(0,0,0,0.1); margin:40px auto; width:80%; text-align:center;">
                    <h2 style="color:#555;">üõí ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏≥‡∏£‡∏∞</h2>
                    <p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö</p>
                    <a href='Product.html' style="display:inline-block; margin-top:20px; padding:12px 30px; background:#b5835a; color:white; text-decoration:none; border-radius:30px; font-weight:bold;">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
                </div>`;
            return;
        }
    }
    document.getElementById("displayPrice").innerText = totalPrice.toLocaleString();
}

function cancelOrder(){
    if(confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")){
        localStorage.removeItem("checkoutItem");
        localStorage.removeItem("cart");
        window.location.href="index.html";
    }
}

function confirmOrderProcess(e) {
    e.preventDefault();
    if(document.getElementById("displayPrice").innerText == "0") return;
    
    var form = document.getElementById("payForm");
    if(!form.checkValidity()) {
        form.reportValidity();
        return;
    }

    localStorage.removeItem("checkoutItem");
    localStorage.removeItem("cart");
    window.location.href = "thankyou.html";
}

loadOrderData();
document.getElementById("payForm").onsubmit = confirmOrderProcess;
</script>
</body>
</html>
